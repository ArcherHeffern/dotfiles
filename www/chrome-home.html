<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AHome</title>
    <style>
        .train_time_container {
            display: flex;
            flex-direction: row;
            flex-wrap: nowrap;
            justify-content: space-around;
            width: 200px;
            border: 1px solid black;
            padding: 5px;
            align-items: center;
        }

        .left-group {
            display: flex;
            flex-direction: row;
            justify-content: flex-start;
            align-items: center;
        }

        .middle-group {
            flex-grow: 1;
        }

        .circle {
            border-radius: 50%;
            display: grid;
            place-items: center;
            background-color: purple;
            font-weight: 700;
            width: 28px;
            height: 28px;
            margin-right: 10px;
        }
    </style>
</head>

<body>
    <div id="train_times_container">
    </div>
</body>

<script defer>
    const data = [
        {
            "train": "1",
            "logo_color_hex": "#DC4D49",
            "street": "96th",
            "status": "Leave now",
        },
        {
            "train": "Q",
            "logo_color_hex": "#f7d448",
            "street": "42nd",
            "status": "5 minutes",
        },
        {
            "train": "2",
            "logo_color_hex": "#DC4D49",
            "street": "96th",
            "status": "Last chance",
        },
    ]

    const train_times_container = document.getElementById("train_times_container");

    function createTrainTimeElement(train, logo_color_hex, street, status) {
        /*
        <div class="left-group">
            <div class="circle" style="background-color: {logo_color_hex}">
                {train}
            </div>
            <div>{street}</div>
        </div>
        <div>
            {status}
        </div>
        */
        // outer container
        const container = document.createElement("div");
        container.className = "train_time_container"
        // left group
        const leftGroup = document.createElement("div");
        leftGroup.className = "left-group";

        // middle group
        const middleGroup = document.createElement("div");
        middleGroup.className = "middle-group";

        // circle
        const circle = document.createElement("div");
        circle.className = "circle";
        circle.style.backgroundColor = logo_color_hex;
        circle.textContent = train;

        // street
        const streetDiv = document.createElement("div");
        streetDiv.textContent = street;

        leftGroup.appendChild(circle);
        leftGroup.appendChild(streetDiv);

        // status
        const statusDiv = document.createElement("div");
        statusDiv.textContent = status;

        container.appendChild(leftGroup);
        container.appendChild(middleGroup);
        container.appendChild(statusDiv);

        return container;
    }

    function render(data) {
        train_times_container.innerHTML = "";
        data.forEach(element => {
            const train = element["train"]
            const logo_color_hex = element["logo_color_hex"]
            const street = element["street"]
            const status = element["status"]

            if (!train || !logo_color_hex || !street || !status) {
                console.error("Missing data when attempting to render")
                console.error(`${train}:${logo_color_hex}:${street}:${status}`)
            }

            train_times_container.appendChild(createTrainTimeElement(
                train, logo_color_hex, street, status
            ))

        });
    }

    render(data);
    function getGeolocationPermissions() {

        navigator.geolocation.getCurrentPosition((position) => {
            console.log(position.coords.latitude, position.coords.longitude)
        })
    }
</script>
<button onclick="getGeolocationPermissions()">Request Location</button>

</html>